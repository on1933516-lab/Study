# スタイルの定義について

## ■ CSS変数（カスタムプロパティ）
### ● 変数と値の宣言
- 通常は `:root` 疑似クラス内で定義する
- 変数名は必ず `--` で始まる
- 任意の有効な CSS 値を設定できる
- 既存の変数には新しい値を再割り当て可能

### ● 変数の値の使用
- `var()` 関数は CSS 値が使用できる場所ならどこでも利用可能
- 例： `var(--movie-frame)`

---

## ■ エディタについて

### ● スタイルエディタ（Visual Styles Editor）
要素に対して視覚的にスタイルを設定する最も簡単な方法。  
ウィジェットを選択し、「Interface」タブからアクセスする。

- CSS の知識が不要
- 個別ウィジェットごとに設定
- インラインスタイルとして適用
- **デザイン時** に割り当てられる

---

### ● スタイルシートエディタ（Style Sheet Editor）
アプリ全体や複数要素に適用するカスタムCSSを直接記述するエディタ。  
画面またはキャンバス表示時のツールバーから開ける。

- CSS の知識があると望ましい
- 複数要素に再利用できるクラスを定義
- **実行時** に適用される（クラスによるため）
- より複雑なセレクタや詳細なスタイル調整に向く

---

## ■ スタイルシートエディタのタブ構成

- **※1：現在編集中のブロック／画面**  
   → この画面（またはブロック）専用のスタイルのみを記述できる

- **※2：アプリケーションテーマ（OSMDb）**  
   → このテーマを使用しているすべての画面／ブロックに適用される  
     （アプリ全体のスタイルルール）

- **※3：テーマエディタ（読み取り専用）**  
   → テーマエディタで定義されたスタイルの参照用  
   → 編集する場合は「Open Theme Editor」リンクからテーマエディタへ移動する必要がある

  ※2および※3はpublish時に１つのスタイルシートにマージされる

- **※4：テーマの継承関係**  
   → アプリテーマ → 親テーマ → OutSystems UI（ベーステーマ）  
      といった“テーマ階層”を確認するタブ

---

## ■ スタイルシートの読み込み順について

### 【複数の異なるルールで同じスタイルプロパティが定義されている場合】

複数の異なるルールを同じHTML要素に適用すると、
**優先順位※** が最も高いルールで、前のルールのスタイルプロパティが上書きされる

**※優先順位について：**

  複数のルールが同じスタイルシートで定義されている場合 ⇒ 最後に適用されたルールが優先される

  もし、ルールのソースが異なる場合、次のような明確な優先順位も存在する

   - **優先度１位：** HTML要素に対して、直接インラインで定義されたスタイルプロパティ 

   - **優先度２位：** HTMLに直接埋め込まれているスタールシート

       ※OutSystemsアプリケーションでは、埋め込みスタイルシートは生成されない
         スタイルシートで定義されたスタイルを上書きする唯一の方法は、
         どのような状況でも最優先されるインラインスタイルを使用すること
              
   - **優先度３位：** 外部スタイルシート
     
       ※外部スタイルシート間の優先順位は読み込み順序の逆になる
         後から読み込まれたCSSが前のCSSを上書きするため、
         HTMLに最後にリンクされた外部スタイルシートの優先順位が高くなる

        例）以下の場合、page.css > theme.css > reset.css の順に優先度が高い。
     
           <link rel="stylesheet" href="reset.css">
           <link rel="stylesheet" href="theme.css">
           <link rel="stylesheet" href="page.css">

### 【スタイルシートのルールとして定義されたスタイルプロパティの場合】

セレクタの種類や構造によって優先順位が変わる。

#### ◎ セレクタの詳細度（Specificity）

詳細度が高いセレクタほど優先され、最終的なスタイルに影響する。

 - IDセレクタ　（詳細度が高い＝優先度が高い）
 - クラス / 属性セレクタ　（詳細度が中くらい）
 - 要素セレクタ　（詳細度が低い＝優先度が低い）

#### ◎ 複雑なセレクタの詳細度算出

複数のセレクタを組み合わせた場合、それぞれに含まれる
「ID・クラス・要素」の数を数え、詳細度を3桁の数字で表す。
この詳細度によって、同じ要素に適用される複数のルールのどれが優先されるかが決まる。

  例：IDの数 / クラスの数 / 要素の数 → (1, 2, 3) なら 123

画面描画時に、一貫した順序で外部スタイルシートにリンクされる。
この順序によって、スタイルルールの優先順位が決まる。

※CSS は「後から読み込まれたスタイルが勝つ」という特性を持つため、読み込み順序は非常に重要。


 - **読み込み順１：** 優先順位が最も低いブロック(Header、Footer、ナビバー、カードUI、共通ボタン etc.)のスタイルシート

 - **読み込み順２：** ベーステーマ（親テーマ）のスタイルシート

   　　　　　　　　最も下位のテーマはOutSystems UI（公式テーマ）で、そこから階層順にテーマが読み込まれ、

   　　　　　　　　最も優先順位が高いのが「アプリケーションが直接継承しているテーマ（子テーマ）」となる。

 - **読み込み順３：** アプリケーションのテーマスタイルシートが読み込まれる

   　　　　　　　　このスタイルシートは、テーマエディタの設定とテーマ独自のルールを１つにまとめたもの。

 - **読み込み順４：** 最も優先順位の高いスタイルシート（画面固有のCSS）が読み込まれる

   　　　　　　　　同じクラスの要素に適用されるルールもここで上書きできる。

---

### 【スタイルプロパティによっては引き継がれない場合もある】

#### ◎ 引き継がれるスタイルプロパティ

要素のテキスト表現に関するスタイルは、多くの場合、子要素へ継承される。

例：
 - font-family
 - font-size
 - color

#### ◎ 引き継がれないスタイルプロパティ

要素のレイアウトや配置に関するスタイルは基本的に継承されない。

例：
 - margin
 - padding
 - position
